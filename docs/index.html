<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Citations Viewer</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <!-- Header -->
  <header class="app-header">
    <!-- Keep white-background logo intact; do not alter asset -->
    <img id="appLogo" class="app-logo" src="assets/logo-white-bg.png" alt="Blue Chip Consultancy Services Logo" />
    <h1 class="app-title">Citations Viewer</h1>
  </header>

  <!-- Main layout -->
  <main class="app-main">
    <!-- Left Drawer (Editor) -->
    <aside id="drawer" class="drawer">
      <div class="drawer-header">
        <h2 id="drawerTitle">Edit Citation</h2>
        <button id="drawerCloseBtn" class="btn btn-secondary" aria-label="Close drawer">×</button>
      </div>

      <form id="citationForm" class="drawer-form" novalidate>
        <!-- Core identity -->
        <label>
          <span>ID (unique, URL-safe)</span>
          <input id="f_id" name="id" type="text" required pattern="[a-z0-9-]+"/>
        </label>
        <label>
          <span>Case Name</span>
          <input id="f_case_name" name="case_name" type="text" required />
        </label>
        <label>
          <span>Citation</span>
          <input id="f_citation" name="citation" type="text" required />
        </label>
        <label>
          <span>Year (YYYY)</span>
          <input id="f_year" name="year" type="number" min="1000" max="9999" required />
        </label>
        <label>
          <span>Court</span>
          <input id="f_court" name="court" type="text" />
        </label>
        <label>
          <span>Jurisdiction</span>
          <input id="f_jurisdiction" name="jurisdiction" type="text" />
        </label>

        <!-- Summaries -->
        <label>
          <span>Summary</span>
          <textarea id="f_summary" name="summary" rows="3"></textarea>
        </label>
        <label>
          <span>Legal Principle</span>
          <textarea id="f_legal_principle" name="legal_principle" rows="2"></textarea>
        </label>
        <label>
          <span>Holding</span>
          <textarea id="f_holding" name="holding" rows="2"></textarea>
        </label>

        <!-- Arrays (semicolon-delimited → arrays) -->
        <label>
          <span>Compliance Flags (use ; to separate)</span>
          <input id="f_compliance_flags" name="compliance_flags" type="text" placeholder="e.g. investment failure; conflict of interest" />
        </label>
        <label>
          <span>Key Points (use ; to separate)</span>
          <input id="f_key_points" name="key_points" type="text" />
        </label>
        <label>
          <span>Tags (use ; to separate)</span>
          <input id="f_tags" name="tags" type="text" />
        </label>

        <!-- Links and full text -->
        <label>
          <span>Case Link (URL or leave blank)</span>
          <input id="f_case_link" name="case_link" type="url" />
        </label>
        <label>
          <span>Full Case Text</span>
          <textarea id="f_full_case_text" name="full_case_text" rows="6" placeholder=""></textarea>
        </label>

        <!-- Printability -->
        <label class="checkbox">
          <input id="f_printable" name="printable" type="checkbox" />
          <span>Printable</span>
        </label>

        <!-- Extended compliance enrichment -->
        <label>
          <span>Breached Law or Rule (use ; to separate)</span>
          <input id="f_breached_law_or_rule" name="breached_law_or_rule" type="text" />
        </label>
        <label>
          <span>Observed Conduct</span>
          <textarea id="f_observed_conduct" name="observed_conduct" rows="2"></textarea>
        </label>
        <label>
          <span>Anomaly Detected</span>
          <textarea id="f_anomaly_detected" name="anomaly_detected" rows="2"></textarea>
        </label>
        <label>
          <span>Authority Basis (use ; to separate)</span>
          <input id="f_authority_basis" name="authority_basis" type="text" />
        </label>
        <label>
          <span>Canonical Breach Tag</span>
          <input id="f_canonical_breach_tag" name="canonical_breach_tag" type="text" list="breachTagSuggestions" />
          <datalist id="breachTagSuggestions"></datalist>
        </label>

        <div class="drawer-actions">
          <button id="validateSaveBtn" class="btn btn-primary" type="submit">Validate & Save (Staging)</button>
          <button id="resetFormBtn" class="btn btn-secondary" type="button">Reset</button>
        </div>
        <p class="form-note">Saves update the in-memory record only. No file writes.</p>
      </form>
    </aside>

    <!-- Right: Viewer -->
    <section class="viewer">
      <div class="viewer-controls">
        <button id="prevBtn" class="btn">&larr; Prev</button>
        <button id="nextBtn" class="btn">Next &rarr;</button>
        <button id="editBtn" class="btn btn-primary">Edit</button>
        <button id="printBtn" class="btn">Print</button>
        <button id="exportBtn" class="btn">Export Current</button>
      </div>

      <article id="citationCard" class="card">
        <!-- Content populated by main.js -->
      </article>
    </section>
  </main>

  <footer class="app-footer">
    <small>Viewer uses dynamic breach tag suggestions from breaches.json (read-only).</small>
  </footer>

  <script src="main.js"></script>
</body>
</html>
